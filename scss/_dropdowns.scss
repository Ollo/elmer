%button_dropdown {
	margin-bottom: 1rem;
	@extend %well_white_no_padding;
	display: inline-block;
	margin-bottom: 0;
	text-transform: uppercase;
	color: $gray;
	cursor: pointer;
	z-index: 3;
	@extend %font_weight_500;

	> span {
		padding: .75rem rem(50) .75rem 1rem;
		display: block;
	}

	> i {
		position: absolute;
		font-size: rem(20);
		top: rem(5);
		color: $light_green;
		right: rem(15);
	}

	.drop_menu {
	    position: absolute;
	    left: 0;
	    right: 0;
	    top: 3.45rem;
	    @include well(0 0 rem(6) rem(6), false, false, false, $white, true);

		a {
			display: block;
			padding: rem(5) 1rem;
			color: $gray;
			@include transition(background .2s ease-in-out);

			&:hover {
				// background: $sand;
				background-color: lighten($light_gray, 20%);
			}

			i {
				margin-right: rem(5);
			}
		}

		&.active, &.open {
			padding: 0 0 .25rem;
		}
	}

	&.active {
		z-index: 4;
	}

}

// Not all drop menu's are used inside a .dropdown
.drop_menu {
	opacity: 0;
	max-height: 0;
	overflow-x: hidden;
    overflow-y: scroll;
	@include transform(translateZ(0));
	@include backface-visibility(hidden);
	@include transition(opacity .1s ease-in-out, max-height .3s ease-in-out);

	&.active, &.open {
		max-height: 50rem;
		opacity: 1;
	}

}

.dropdown {
	@extend %button_dropdown;

	// .dropdown.sorting
	//
	// Standard button style dropdown for filtering and sorting. @extends %button_dropdown
	//
	// Markup:
	// <div class="dropdown sorting">
	//     <span class="selected_option">Sort & Filter</span>
	//     <i class="fa fa-sort-desc"></i>
	//     <div class="drop_menu active">
	//         <a href="" class="option">Role</a>
	//         <a href="" class="option">Date Added</a>
	//     </div>
	// </div>
	//
	// Styleguide 20.2

	&.sorting {
		min-width: rem(180);
	}

	// .dropdown.action
	//
	// Standard button style dropdown for table actions. @extends %button_dropdown
	//
	// Markup:
	// <div class="dropdown action">
	// 	<span class="selected_option">Action</span>
	// 	<i class="fa fa-sort-desc"></i>
	// 	<div class="drop_menu">
	// 		<a href="" class="option">Change Role</a>
	// 		<a href="" class="option">View Activity</a>
	// 		<a href="" class="option">Send Message</a>
	//	</div>
	// </div>
	// <div class="dropdown action">
	// 	<span class="selected_option">Action</span>
	// 	<i class="fa fa-sort-desc"></i>
	// 	<div class="drop_menu active">
	// 		<a href="" class="option">Change Role</a>
	// 		<a href="" class="option">View Activity</a>
	// 		<a href="" class="option">Send Message</a>
	// 	</div>
	// </div>
	//
	// Styleguide 20.3
	&.action {
		min-width: rem(145);
		background-color: lighten($light_gray, 20%);

		.drop_menu {
			background-color: lighten($light_gray, 20%);
			a {
				&:hover {
					background: $white;
				}
			}
		}

	}

}


//force menu to hide on desktop
.dropdown_menu {
	@include media($medium) {
		&.mobile_only {
			display: none!important;
		}
	}
}


// panels are used in large white dropdown menus
.panel {
	@include backface-visibility(hidden);
	@include transform(translateZ(0));
}

.panel_trigger.btn_action {
	background: $white;
	color: $teal;

	&.squared {
		transition: none!important;
	}

	&.active {

		&.arrow {
			&:before {
				content: '';
				position: absolute;
				bottom: -1.5rem;
				left: .75rem;
				border-left: 1rem solid transparent;
				border-right: 1rem solid transparent;
				border-bottom: 1rem solid $white;
			}
		}

		&.squared {
			border-radius: 6px 6px 0 0;
			padding-bottom: rem(17);
			margin-bottom: rem(-12);
		}

	}

}

// .dropdown_navigation
//
// Standard large white dropdown. Use this class or @extend %dropdown_navigation. Addition of the class 'arrow' to both menu and button will allow for an arrow to show when the menu is open. Addition of the class 'squared' will allow for the menu to open attached to the button.
// All dropdown_navigations need the class 'panel' and the button needs 'panel_trigger' to activation angularjs components of 'clickClosed' and 'togglePanel'. See examples below for other requirements.
//
//
// Markup:
// <div style="background: gray; padding: 1rem 1rem 10rem;">
//   <button eg-click-closed eg-panel-toggle panel="arrowMenu" class="btn_action panel_trigger arrow active"><i class="fa fa-cog"></i></button>
//   <div id="arrowMenu" class="dropdown_navigation panel arrow active">
//      Dropdown navigation <strong>with an arrow</strong>, often used in various settings menus.
//   </div>
// </div>
// <div style="background: gray; padding: 1rem 1rem 10rem;">
//   <button eg-click-closed eg-panel-toggle panel="squareMenu" class="btn_action panel_trigger squared active"><i class="fa fa-cog"></i></button>
//   <div id="squareMenu" class="dropdown_navigation panel squared active">
//      Dropdown navigation <strong>with a square</strong>, often used in various settings menus.
//   </div>
// </div>
//
// Styleguide 20.3
%dropdown_navigation {
	position: absolute;
	width: 100%;
	text-align: left;
	max-height: 0;
	overflow: hidden;
	left: 0;
	right: 0;
	z-index: 10;
	border-radius: 6px;
	padding: rem(15);
	opacity: 0;
	@extend %well_white_no_padding;
	@include transition(all .2s ease-in-out);

	a {
		display: inline-block;
	}

	&.active, &:focus {
		outline: none;
		opacity: 1;
		max-height: 1000rem;
		// z-index: 2;
	}

	.primary {
		margin: 1em auto;
		display: block;
	}

	li.bordered {
		margin-bottom: 2rem;
		.ui_checkbox_secondary {
			+ label {
				padding-bottom: 0;
			}
		}
	}

	&.arrow {
		margin-top: 1.4rem;
		&.active, &.focus {

		}
	}
}

.dropdown_navigation {
	@extend %dropdown_navigation;
}